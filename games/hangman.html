<!DOCTYPE html>
<html>
<head>
  <title>Hangman</title>
  <style>
        body {
            background-color: #f1f1f1;
        }

      .container {
          display: flex;
          flex-direction: column;
          align-items: center;
          margin-top: 50px;
      }

      .hangman {
          margin-top: 20px;
            width: 400px;
            height: 400px;
            background-image: url('images/0.png');
            background-size: cover;
      }

      .word {
          margin-top: 20px;
          font-size: 2em;
          font-weight: bold;
      }

      .letters {
          margin-top: 20px;
          display: flex;
          flex-wrap: wrap;
      }

      .letter {
          border: 1px solid black;
          width: 40px;
          height: 40px;
          display: flex;
          justify-content: center;
          align-items: center;
          font-size: 1.5em;
          margin-right: 10px;
          margin-bottom: 10px;
          cursor: pointer;
      }

      .letter.used {
          background-color: gray;
          color: white;
      }

      .new-game {
          margin-top: 20px;
          font-size: 1.5em;
      }
  </style>
</head>
<body>
<div class="container">
  <h1>Hangman</h1>
        <div class="hangman"></div>
  <div class="word"></div>
  <div class="letters"></div>
  <button class="new-game">New Game</button>
</div>
<script type="text/javascript">
  const apiURL = "https://random-word-api.herokuapp.com/word?number=1";
  let word = "";
  let hiddenWord = "";
  let letters = [];
        const hangman = document.querySelector(".hangman");
  const wordContainer = document.querySelector(".word");
  const letterContainer = document.querySelector(".letters");
  const newGameButton = document.querySelector(".new-game");

  fetch(apiURL)
    .then(response => response.json())
    .then(data => {
      word = data[0].toUpperCase();
      hiddenWord = word.replace(/[a-zA-Z]/g, "_");
      wordContainer.textContent = hiddenWord;
    });

  const checkForWin = () => {
    if (hiddenWord === word) {
      alert("You won!");
      newGame();
    }
  };

  const checkForLoss = () => {
    if (letters.length >= 6) {
      alert(`You lost! The word was "${word}".`);
      newGame();
    }
  };

  const updateHangman = () => {
        hangman.style.backgroundImage = `url('images/${letters.length}.png')`;
  };

  const updateWord = () => {
    wordContainer.textContent = hiddenWord;
  };

  const updateLetters = () => {
    letterContainer.innerHTML = "";
    for (let i = 65; i <= 90; i++) {
      const letter = String.fromCharCode(i);
      const letterElement = document.createElement("div");
      letterElement.classList.add("letter");
      letterElement.textContent = letter;
      if (letters.includes(letter)) {
        letterElement.classList.add("used");
      } else {
        letterElement.addEventListener("click", () => {
          letters.push(letter);
          if (word.includes(letter)) {
            for (let j = 0; j < word.length; j++) {
              if (word[j] === letter) {
                hiddenWord = hiddenWord.substr(0, j) + letter + hiddenWord.substr(j + 1);
              }
            }
            updateWord();
            checkForWin();
          } else {
            updateLetters();
            letters.push(letter);
            updateHangman();
            checkForLoss();
          }
        });
      }
      letterContainer.appendChild(letterElement);
    }
  };

  const newGame = () => {
    fetch(apiURL)
      .then(response => response.json())
      .then(data => {
                word = data[0].toUpperCase();
        hiddenWord = word.replace(/[a-zA-Z]/g, "_");
        letters = [];
        updateWord();
        updateHangman();
        updateLetters();
      });
  };

  newGameButton.addEventListener("click", newGame);
</script>
</body>
</html>