<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Blackjack</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      background-color: #1c1c1c;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
    }

    .table {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 1rem;
      padding: 1rem;
    }

    .card {
      background-color: #fff;
      border-radius: 5px;
      height: 120px;
      margin-bottom: 0.5rem;
      width: 80px;
    }

    .hidden {
      background-image: url('https://via.placeholder.com/80x120');
    }

    .player-hand {
      grid-column: 1 / 4;
    }

    .dealer-hand {
      grid-column: 2 / 3;
    }

    .buttons {
      grid-column: 1 / 4;
      display: flex;
      justify-content: center;
      margin-top: 1rem;
    }

    button {
      background-color: #000;
      border: none;
      border-radius: 5px;
      color: #fff;
      cursor: pointer;
      font-size: 1rem;
      margin-right: 0.5rem;
      padding: 0.5rem;
      text-align: center;
      transition: background-color 0.2s;
      width: 80px;
    }

    button:hover {
      background-color: #444;
    }

    button:active {
      background-color: #222;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="table">
  <div class="player-hand">
    <div class="card"></div>
    <div class="card"></div>
    <div class="card hidden"></div>
  </div>
  <div class="dealer-hand">
    <div class="card"></div>
    <div class="card hidden"></div>
  </div>
  <div class="buttons">
    <button class="hit">Hit</button>
    <button class="stand">Stand</button>
    <button class="reset">Reset</button>
  </div>
</div>
<script type="text/javascript">
  const suits = ['hearts', 'diamonds', 'clubs', 'spades'];
  const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
  let deck = [];
  let playerHand = [];
  let dealerHand = [];

  function createDeck() {
    for (let suit of suits) {
      for (let value of values) {
        deck.push(`${value}_of_${suit}`);
      }
    }
  }

  function shuffleDeck() {
    for (let i = deck.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [deck[i], deck[j]] = [deck[j], deck[i]];
    }
  }

  function dealCards() {
    playerHand.push(drawCard());
    dealerHand.push(drawCard());
    playerHand.push(drawCard());
    dealerHand.push(drawCard());
  }

  function drawCard() {
    return deck.pop();
  }

  function calculateHandValue(hand) {
    let value = 0;
    let aceCount = 0;
    for (let card of hand) {
      const cardValue = card.split('_')[0];
      if (cardValue === 'A') {
        aceCount++;
        value += 11;
      } else if (['K', 'Q', 'J'].includes(cardValue)) {
        value += 10;
      } else {
        value += parseInt(cardValue);
      }
    }
    while (value > 21 && aceCount > 0) {
      value -= 10;
      aceCount--;
    }
    return value;
  }

  function checkBlackjack() {
    if (playerHand.length === 2 && calculateHandValue(playerHand) === 21) {
      alert('Blackjack! You win!');
      resetGame();
    } else if (dealerHand.length === 2 && calculateHandValue(dealerHand) === 21) {
      alert('Dealer has Blackjack. You lose.');
      resetGame();
    }
  }

  function playerHit() {
    playerHand.push(drawCard());
    updateUI();
    const handValue = calculateHandValue(playerHand);
    if (handValue > 21) {
      alert('Bust! You lose.');
      resetGame();
    } else if (handValue === 21) {
      stand();
    }
  }

  function stand() {
    while (calculateHandValue(dealerHand) < 17) {
      dealerHand.push(drawCard());
      updateUI();
    }
    const playerValue = calculateHandValue(playerHand);
    const dealerValue = calculateHandValue(dealerHand);
    if (dealerValue > 21) {
      alert('Dealer busts! You win!');
    } else if (dealerValue > playerValue) {
      alert('Dealer wins!');
    } else if (dealerValue < playerValue) {
      alert('You win!');
    } else {
      alert('Push!');
    }
    resetGame();
  }

  function resetGame() {
    deck = [];
    playerHand = [];
    dealerHand = [];
    createDeck();
    shuffleDeck();
    dealCards();
    updateUI();
  }

  function updateUI() {
    $('.player-hand .card').each(function(index) {
      $(this).css('background-image', `url('cards/${playerHand[index]}.png'))`;
    });
    $('.dealer-hand .card').each(function(index) {
      $(this).css('background-image', `url('cards/${dealerHand[index]}.png'))`;
    });
    const playerValue = calculateHandValue(playerHand);
    const dealerValue = calculateHandValue(dealerHand);
    $('.player-hand-value').text(playerValue);
    $('.dealer-hand-value').text(dealerValue);
  }

  $(document).ready(function() {
    createDeck();
    shuffleDeck();
    dealCards();
    checkBlackjack();
    updateUI();
    $('.hit').click(playerHit);
    $('.stand').click(stand);
    $('.reset').click(resetGame);
  });
</script>
</body>
</html>
