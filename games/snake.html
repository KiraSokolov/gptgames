<!DOCTYPE html>
<html lang="en">
<head>
    <title>Snake</title>
    <meta name="keywords" content="Snake game,HTML,JavaScript,classic game,mobile-friendly,web game,game development" />
    <meta name="description" content="Play the classic Snake game with this HTML and JavaScript code. Move the snake to eat the food,but be careful not to hit the wall or your tail." />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        #game-board {
            width: 300px;
            height: 300px;
            border: 2px solid #3498db;
            margin: 50px auto;
            position: relative;
            border-radius: 10px;
            box-shadow: 0px 0px 10px #2e86c1;
            background-color: #ecf0f1;
        }
        .snake-unit {
            width: 10px;
            height: 10px;
            background-color: #2ecc71;
            position: absolute;
            border-radius: 5px;
        }
        .food-unit {
            width: 10px;
            height: 10px;
            background-color: #e74c3c;
            position: absolute;
            border-radius: 5px;
        }
        .obstacle-unit {
            width: 10px;
            height: 10px;
            background-color: #8e44ad;
            position: absolute;
            border-radius: 5px;
        }
        #score {
            width: 100%;
            text-align: center;
            font-size: 18px;
            margin-bottom: 10px;
        }
        #difficulty {
            width: 100%;
            text-align: center;
            font-size: 16px;
            margin-bottom: 10px;
        }
        #restart {
            width: 100%;
            text-align: center;
            font-size: 16px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
<div id="score">Score: 0</div>
<div id="difficulty">
    Difficulty:
    <select id="difficulty-selector">
        <option value="easy">Easy</option>
        <option value="medium">Medium</option>
        <option value="hard">Hard</option>
    </select>
</div>
<div id="restart">
    <button id="restart-button">Restart</button>
</div>
<div id="game-board"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
<script src="../sidebar.js"></script>
</body>
<script>
    const gameBoard = document.getElementById("game-board");
    const scoreElement = document.getElementById("score");
    const difficultySelector = document.getElementById("difficulty-selector");
    const restartButton = document.getElementById("restart-button");
    let snake = [];
    let food = null;
    let obstacles = [];
    let score = 0;
    const unitSize = 10;
    const boardWidth = gameBoard.offsetWidth;
    const boardHeight = gameBoard.offsetHeight;
    let xDirection = unitSize;
    let yDirection = 0;
    let gameInterval = null;
    let isPaused = false;

    function updateScore() {
        score++;
        scoreElement.textContent = "Score: " + score;
    }

    function createSnake() {
        for (let i = 4; i >= 0; i--) {
            let snakeUnit = document.createElement("div");
            snakeUnit.classList.add("snake-unit");
            snakeUnit.style.left = i * unitSize + "px";
            snakeUnit.style.top = 0 + "px";
            snake.push(snakeUnit);
            gameBoard.appendChild(snakeUnit);
        }
    }

    function createFood() {
        food = document.createElement("div");
        food.classList.add("food-unit");
        let x = Math.floor(Math.random() * (boardWidth / unitSize)) * unitSize;
        let y = Math.floor(Math.random() * (boardHeight / unitSize)) * unitSize;
        food.style.left = x + "px";
        food.style.top = y + "px";
        gameBoard.appendChild(food);
    }

    function createObstacles() {
        const obstacleCount = Math.floor(Math.random() * 6) + 5;
        for (let i = 0; i < obstacleCount; i++) {
            let obstacle = document.createElement("div");
            obstacle.classList.add("obstacle-unit");
            let x = Math.floor(Math.random() * (boardWidth / unitSize)) * unitSize;
            let y = Math.floor(Math.random() * (boardHeight / unitSize)) * unitSize;
            obstacle.style.left = x + "px";
            obstacle.style.top = y + "px";
            obstacles.push(obstacle);
            gameBoard.appendChild(obstacle);
        }
    }

    function moveSnake() {
        if (isPaused) return;
        let x = snake[0].offsetLeft + xDirection;
        let y = snake[0].offsetTop + yDirection;
        let newUnit = document.createElement("div");
        newUnit.classList.add("snake-unit");
        newUnit.style.left = x + "px";
        newUnit.style.top = y + "px";
        snake.unshift(newUnit);
        gameBoard.appendChild(newUnit);
        if (x !== food.offsetLeft || y !== food.offsetTop) {
            let removedUnit = snake.pop();
            removedUnit.remove();
        } else {
            food.remove();
            createFood();
            updateScore();
        }
        checkCollision();
    }

    function checkCollision() {
        let x = snake[0].offsetLeft;
        let y = snake[0].offsetTop;
        if (x >= boardWidth || x < 0 || y >= boardHeight || y < 0) {
            gameOver();
        }
        for (let i = 1; i < snake.length; i++) {
            if (x === snake[i].offsetLeft && y === snake[i].offsetTop) {
                gameOver();
            }
        }
        for (let i = 0; i < obstacles.length; i++) {
            if (x === obstacles[i].offsetLeft && y === obstacles[i].offsetTop) {
                gameOver();
            }
        }
    }

    function togglePause() {
        isPaused = !isPaused;
    }

    function setGameSpeed() {
        const difficulty = difficultySelector.value;
        let speed;
        if (difficulty === "easy") {
            speed = 150;
        } else if (difficulty === "medium") {
            speed = 100;
        } else {
            speed = 50;
        }
        clearInterval(gameInterval);
        gameInterval = setInterval(moveSnake, speed);
    }

    function clearBoard() {
        snake.forEach(unit => unit.remove());
        snake = [];
        food && food.remove();
        obstacles.forEach(obstacle => obstacle.remove());
        obstacles = [];
    }
    function resetGame() {
        clearInterval(gameInterval);
        isPaused = false;
        clearBoard();
        xDirection = unitSize;
        yDirection = 0;
        score = 0;
        scoreElement.textContent = "Score: " + score;
        createSnake();
        createFood();
        createObstacles();
        setGameSpeed();
    }

    function gameOver() {
        clearInterval(gameInterval);
        alert("Game over!");
        resetGame();
    }

    document.onkeydown = function (event) {
        switch (event.keyCode) {
            case 32:
                togglePause();
                break;
            case 37:
                if (xDirection === 0) {
                    xDirection = -unitSize;
                    yDirection = 0;
                }
                break;
            case 38:
                if (yDirection === 0) {
                    xDirection = 0;
                    yDirection = -unitSize;
                }
                break;
            case 39:
                if (xDirection === 0) {
                    xDirection = unitSize;
                    yDirection = 0;
                }
                break;
            case 40:
                if (yDirection === 0) {
                    xDirection = 0;
                    yDirection = unitSize;
                }
                break;
        }
    };

    difficultySelector.addEventListener("change", setGameSpeed);
    restartButton.addEventListener("click", resetGame);

    const mc = new Hammer(gameBoard);
    mc.get("swipe").set({ direction: Hammer.DIRECTION_ALL });
    mc.on("swipeleft swiperight swipeup swipedown", function (event) {
        if (event.type === "swipeleft" && xDirection === 0) {
            xDirection = -unitSize;
            yDirection = 0;
        } else if (event.type === "swiperight" && xDirection === 0) {
            xDirection = unitSize;
            yDirection = 0;
        } else if (event.type === "swipeup" && yDirection === 0) {
            xDirection = 0;
            yDirection = -unitSize;
        } else if (event.type === "swipedown" && yDirection === 0) {
            xDirection = 0;
            yDirection = unitSize;
        }
    });

    createSnake();
    createFood();
    createObstacles();
    setGameSpeed();
</script>
</html>