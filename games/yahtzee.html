<!DOCTYPE html>
<html>
<head>
  <title>Yahtzee Game</title>
  <style>
    #dice {
      display: flex;
      justify-content: center;
    }

    #dice img {
      width: 75px;
      margin: 10px;
    }

    #scorecard {
      margin-top: 50px;
    }

    #scorecard h2 {
      text-align: center;
    }

    table {
      border-collapse: collapse;
      width: 100%;
    }

    th, td {
      text-align: left;
      padding: 8px;
      border-bottom: 1px solid #ddd;
    }

    tr:hover {
      background-color: #f5f5f5;
    }

    th {
      background-color: #4CAF50;
      color: white;
    }
  </style>
</head>
<body>
<h1>Yahtzee Game</h1>
<div id="dice">
  <img id="die1" src="https://www.wpclipart.com/recreation/games/dice/die_face_1.png">
  <img id="die2" src="https://www.wpclipart.com/recreation/games/dice/die_face_2.png">
  <img id="die3" src="https://www.wpclipart.com/recreation/games/dice/die_face_3.png">
  <img id="die4" src="https://www.wpclipart.com/recreation/games/dice/die_face_4.png">
  <img id="die5" src="https://www.wpclipart.com/recreation/games/dice/die_face_5.png">
</div>
<button onclick="rollDice()">Roll Dice</button>
<div id="scorecard">
  <h2>Scorecard</h2>
  <table>
    <tr>
      <th>Category</th>
      <th>Score</th>
      <th>Status</th>
    </tr>
    <tr>
      <td>Ones</td>
      <td id="onesScore"></td>
      <td id="onesStatus"></td>
    </tr>
    <tr>
      <td>Twos</td>
      <td id="twosScore"></td>
      <td id="twosStatus"></td>
    </tr>
    <tr>
      <td>Threes</td>
      <td id="threesScore"></td>
      <td id="threesStatus"></td>
    </tr>
    <tr>
      <td>Fours</td>
      <td id="foursScore"></td>
      <td id="foursStatus"></td>
    </tr>
    <tr>
      <td>Fives</td>
      <td id="fivesScore"></td>
      <td id="fivesStatus"></td>
    </tr>
    <tr>
      <td>Sixes</td>
      <td id="sixesScore"></td>
      <td id="sixesStatus"></td>
    </tr>
    <tr>
      <td>Three of a kind</td>
      <td id="threeKindScore"></td>
      <td id="threeKindStatus"></td>
    </tr>
    <tr>
      <td>Four of a kind</td>
      <td id="fourKindScore"></td>
      <td id="fourKindStatus"></td>
    </tr>
    <tr>
      <td>Full House</td>
      <td id="fullHouseScore"></td>
      <td id="fullHouseStatus"></td>
    </tr>
    <tr>
      <td>Small Straight</td>
      <td id="smallStraightScore"></td>
      <td id="smallStraightStatus"></td>
    </tr>
    <tr>
      <td>Large Straight</td>
      <td id="largeStraightScore"></td>
      <td id="largeStraightStatus"></td>
    </tr>
    <tr>
      <td>Yahtzee</td>
      <td id="yahtzeeScore"></td>
      <td id="yahtzeeStatus"></td>
    </tr>
    <tr>
      <td>Chance</td>
      <td id="chanceScore"></td>
      <td id="chanceStatus"></td>
    </tr>
  </table>

</div>
<script type="text/javascript">
  // Initialize variables
  var dice = [];
  var rollsRemaining = 3;
  var selectedCategory = null;
  var totalScore = 0;

  // Function to roll the dice
  function rollDice() {
    // If there are no rolls remaining, do nothing
    if (rollsRemaining === 0) {
      return;
    }

    // Roll each die and update the corresponding image
    for (var i = 1; i <= 5; i++) {
      if (!dice[i-1] || dice[i-1].locked === false) {
        var roll = Math.floor(Math.random() * 6) + 1;
        document.getElementById("die" + i).src = "https://www.wpclipart.com/recreation/games/dice/die_face_" + roll + ".png";
        dice[i-1] = {
          value: roll,
          locked: false
        };
      }
    }

    // Decrement rolls remaining
    rollsRemaining--;

    // If there are no rolls remaining, disable the Roll Dice button
    if (rollsRemaining === 0) {
      document.getElementsByTagName("button")[0].disabled = true;
    }
  }

  // Function to toggle the lock on a die
  function toggleLock(index) {
    // If there are no rolls remaining, do nothing
    if (rollsRemaining === 0) {
      return;
    }

    // Toggle the lock on the die
    dice[index].locked = !dice[index].locked;

    // Update the corresponding image with a locked or unlocked icon
    if (dice[index].locked) {
      document.getElementById("die" + (index+1)).src = "https://www.wpclipart.com/recreation/games/dice/die_face_" + dice[index].value + "_locked.png";
    } else {
      document.getElementById("die" + (index+1)).src = "https://www.wpclipart.com/recreation/games/dice/die_face_" + dice[index].value + ".png";
    }
  }

  // Function to score the dice in a category
  function scoreCategory(category) {
    // If the category has already been used, do nothing
    if (document.getElementById(category + "Status").innerHTML !== "") {
      return;
    }

    // Determine the score for the category
    var score = 0;
    if (category === "Ones") {
      score = dice.filter(function(die) { return die.value === 1; }).length * 1;
    } else if (category === "Twos") {
      score = dice.filter(function(die) { return die.value === 2; }).length * 2;
    } else if (category === "Threes") {
      score = dice.filter(function(die) { return die.value === 3; }).length * 3;
    } else if (category === "Fours") {
      score = dice.filter(function(die) { return die.value === 4; }).length * 4;
    } else if (category === "Fives") {
      score = dice.filter(function(die) { return die.value === 5; }).length * 5;
    } else if (category === "Sixes") {
      score = dice.filter(function(die) { return die.value === 6; }).length * 6;
    } else if (category === "Three of a kind") {
      var groups = groupDice();
      for (var i = 0; i < groups.length; i++) {
        if (groups[i].length >= 3) {
          score = sumDice();
          break;
        }
      }
    } else if (category === "Four of a kind") {
      var groups = groupDice();
      for (var i = 0; i < groups.length; i++) {
        if (groups[i].length >= 4) {
          score = sumDice();
          break;
        }
      }
    } else if (category === "Full House") {
      var groups = groupDice();
      if (groups.length === 2 && (groups[0].length === 2 || groups[0].length === 3)) {
        score = 25;
      }
    } else if (category === "Small Straight") {
      if (dice.filter(function(die) { return die.value === 1; }).length >= 1 &&
              dice.filter(function(die) { return die.value === 2; }).length >= 1 &&
              dice.filter(function(die) { return die.value === 3; }).length >= 1 &&
              dice.filter(function(die) { return die.value === 4; }).length >= 1) {
        score = 30;
      } else if (dice.filter(function(die) { return die.value === 2; }).length >= 1 &&
              dice.filter(function(die) { return die.value === 3; }).length >= 1 &&
              dice.filter(function(die) { return die.value === 4; }).length >= 1 &&
              dice.filter(function(die) { return die.value === 5; }).length >= 1) {
        score = 30;
      } else if (dice.filter(function(die) { return die.value === 3; }).length >= 1 &&
              dice.filter(function(die) { return die.value === 4; }).length >= 1 &&
              dice.filter(function(die) { return die.value === 5; }).length >= 1 &&
              dice.filter(function(die) { return die.value === 6; }).length >= 1) {
        score = 30;
      }
    } else if (category === "Large Straight") {
      if (dice.filter(function(die) { return die.value === 1; }).length === 1 &&
              dice.filter(function(die) { return die.value === 2; }).length === 1 &&
              dice.filter(function(die) { return die.value === 3; }).length === 1 &&
              dice.filter(function(die) { return die.value === 4; }).length === 1 &&
              dice.filter(function(die) { return die.value === 5; }).length=== 1) {
        score = 40;
      } else if (dice.filter(function(die) { return die.value === 2; }).length === 1 &&
              dice.filter(function(die) { return die.value === 3; }).length === 1 &&
              dice.filter(function(die) { return die.value === 4; }).length === 1 &&
              dice.filter(function(die) { return die.value === 5; }).length === 1 &&
              dice.filter(function(die) { return die.value === 6; }).length === 1) {
        score = 40;
      }
    } else if (category === "Yahtzee") {
      var groups = groupDice();
      for (var i = 0; i < groups.length; i++) {
        if (groups[i].length === 5) {
          score = 50;
          break;
        }
      }
    } else if (category === "Chance") {
      score = sumDice();
    }

// Update the score and status for the category
    document.getElementById(category + "Score").innerHTML = score;
    document.getElementById(category + "Status").innerHTML = "Used";
    selectedCategory = null;

// Reset the rolls remaining and enable the Roll Dice button
    rollsRemaining = 3;
    document.getElementsByTagName("button")[0].disabled = false;

// Reset the dice and images
    dice = [];
    for (var i = 1; i <= 5; i++) {
      document.getElementById("die" + i).src = "https://www.wpclipart.com/recreation/games/dice/die_face_blank.png";
    }

// Add the score to the total and update the total score
    totalScore += score;
    document.getElementById("totalScore").innerHTML = totalScore;

// Check if all categories have been used
    if (document.getElementById("upperScore").innerHTML >= 63 && document.getElementById("bonusScore").innerHTML === "") {
      document.getElementById("bonusScore").innerHTML = 35;
      totalScore += 35;
      document.getElementById("totalScore").innerHTML = totalScore;
    }
    if (document.getElementById("onesStatus").innerHTML !== "" &&
            document.getElementById("twosStatus").innerHTML !== "" &&
            document.getElementById("threesStatus").innerHTML !== "" &&
            document.getElementById("foursStatus").innerHTML !== "" &&
            document.getElementById("fivesStatus").innerHTML !== "" &&
            document.getElementById("sixesStatus").innerHTML !== "" &&
            document.getElementById("threeOfAKindStatus").innerHTML !== "" &&
            document.getElementById("fourOfAKindStatus").innerHTML !== "" &&
            document.getElementById("fullHouseStatus").innerHTML !== "" &&
            document.getElementById("smallStraightStatus").innerHTML !== "" &&
            document.getElementById("largeStraightStatus").innerHTML !== "" &&
            document.getElementById("yahtzeeStatus").innerHTML !== "" &&
            document.getElementById("chanceStatus").innerHTML !== "") {
      endGame();
    }
  }

  // Function to group the dice by value
  function groupDice() {
    var groups = [];
    for (var i = 1; i <= 6; i++) {
      groups.push(dice.filter(function(die) { return die.value === i; }));
    }
    return groups.filter(function(group) { return group.length > 0; });
  }

  // Function to sum the dice values
  function sumDice() {
    return dice.reduce(function(total, die) { return total + die.value; }, 0);
  }

  // Function to end the game and determine the winner
  function endGame() {
    var scores = [
      parseInt(document.getElementById("upperScore").innerHTML),
      parseInt(document.getElementById("bonusScore").innerHTML),
      parseInt(document.getElementById("threeOfAKindScore").innerHTML),
      parseInt(document.getElementById("fourOfAKindScore").innerHTML),
      parseInt(document.getElementById("fullHouseScore").innerHTML),
      parseInt(document.getElementById("smallStraightScore").innerHTML),
      parseInt(document.getElementById("largeStraightScore").innerHTML),
      parseInt(document.getElementById("yahtzeeScore").innerHTML),
      parseInt(document.getElementById("chanceScore").innerHTML)
    ];
    var maxScore = Math.max.apply(null, scores);
    var winners = [];
    for (var i = 0; i < scores.length; i++) {
      if (scores[i] === maxScore) {
        winners.push(i);
      }
    }
    if (winners.length === 1) {
      alert("Player " + (winners[0] + 1) + " wins with a score of " + maxScore + "!");
    } else {
      alert("Tie game! Players " + winners.join(", ") + " tied with a score of " + maxScore + ".");
      document.getElementById("tiebreaker").style.display = "block";
      document.getElementById("rollButton").style.display = "none";
    }
    document.getElementsByTagName("button")[0].disabled = true;
    document.getElementById("onesStatus").innerHTML = "Used";
    document.getElementById("twosStatus").innerHTML = "Used";
    document.getElementById("threesStatus").innerHTML = "Used";
    document.getElementById("foursStatus").innerHTML = "Used";
    document.getElementById("fivesStatus").innerHTML = "Used";
    document.getElementById("sixesStatus").innerHTML = "Used";
    document.getElementById("threeOfAKindStatus").innerHTML = "Used";
    document.getElementById("fourOfAKindStatus").innerHTML = "Used";
    document.getElementById("fullHouseStatus").innerHTML = "Used";
    document.getElementById("smallStraightStatus").innerHTML = "Used";
    document.getElementById("largeStraightStatus").innerHTML = "Used";
    document.getElementById("yahtzeeStatus").innerHTML = "Used";
    document.getElementById("chanceStatus").innerHTML = "Used";
  }

  // Function to handle tiebreaker rolls
  function rollTiebreaker() {
// Roll the dice and update the images
    for (var i = 0; i < dice.length; i++) {
      if (dice[i].selected) {
        dice[i].value = Math.floor(Math.random() * 6) + 1;
        document.getElementById("die" + (i + 1)).src = "https://www.wpclipart.com/recreation/games/dice/die_face_" + dice[i].value + ".png";
      }
    }

// Decrease the number of rolls remaining
    tiebreakerRollsRemaining--;
    document.getElementById("tiebreakerRolls").innerHTML = tiebreakerRollsRemaining;

// Disable the Roll Dice button if there are no rolls remaining
    if (tiebreakerRollsRemaining === 0) {
      document.getElementById("tiebreakerRollButton").disabled = true;
    }
  }
</script>
</body>
</html>