<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuotoSaurus</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Arial', sans-serif;
      background-color: #f0f2f5;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 40px;
      width: 100%;
      max-width: 400px;
    }

    .title {
      margin-bottom: 20px;
      text-align: center;
    }

    .input-group {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .label {
      font-weight: bold;
    }

    .generate-button {
      background-color: #4caf50;
      border: none;
      border-radius: 5px;
      color: #fff;
      cursor: pointer;
      font-size: 16px;
      padding: 10px 20px;
      width: 100%;
    }

    .generate-button:hover {
      background-color: #45a049;
    }

    .quote {
      margin-top: 20px;
      font-style: italic;
      text-align: center;
    }

    .author {
      margin-top: 10px;
      font-style: italic;
      text-align: right;
    }
  </style>
</head>
<body>
<div class="container">
  <h1 class="title">QuotoSaurus</h1>
  <div class="input-group">
    <label for="creativity" class="label">Creativity:</label>
    <span id="creativity-value">50%</span><input type="range" id="creativity" name="creativity" min="0" max="100" step="5" value="50">
  </div>
  <div class="input-group">
    <label for="topic" class="label">Topic:</label>
    <input type="text" id="topic" name="topic" placeholder="Optional">
  </div>
  <div class="input-group">
    <label for="author" class="label">Author:</label>
    <input type="text" id="author" name="author" placeholder="Optional">
  </div>
  <button class="generate-button" onclick="generateQuote()">Generate Quote</button>
  <p class="quote" id="quote"></p>
  <p class="author" id="author-output"></p>
</div>
<script>
  async function generateQuote() {
    const creativitySlider = document.getElementById('creativity');
    const topicInput = document.getElementById('topic');
    const authorInput = document.getElementById('author');
    const quoteElement = document.getElementById('quote');
    const authorElement = document.getElementById('author-output');

    const creativity = creativitySlider.value / 100;
    const topic = topicInput.value.trim();
    const author = authorInput.value.trim();

    let botMessage = `I am the QuotoSaurus API. I generate a quote and will provide structured responses in this JSON format: { "quote": "<quote_text>", "author": "<author_name>" }\nWhen no parameters are present, I will generate a random quote from a random author.\n`;

    if (topic) {
      botMessage += `\nTopic: ${topic}`;
    }

    if (author) {
      botMessage += `\nAuthor: ${author}`;
    }

    botMessage += `\n\nHere is the quote:`;

    const response = await fetch('https://chatgpt.tobiasmue91.workers.dev/', {
      method: 'POST',
      headers: {"Content-Type": "application/json", "Accept": "*/*"},
      body: JSON.stringify({
        model: "gpt-3.5-turbo-0301",
        max_tokens: 60,
        temperature: creativity * 2,
        messages: [
          {
            role: "assistant",
            content: botMessage,
          },
        ],
      })
    });

    const data = await response.json();
    const responseMessageData = JSON.parse(data.choices[0].message.content);
    quoteElement.textContent = responseMessageData.quote;
    authorElement.textContent = `â€” ${responseMessageData.author}`;
  }

  document.getElementById('creativity').addEventListener("input", function (event) {
    document.getElementById("creativity-value").textContent = Number(event.target.value) + '%';
  });
</script>
</body>
</html>