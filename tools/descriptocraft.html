<!DOCTYPE html>
<html>
<head>
  <title>DescriptoCraft</title>
  <link href="https://fonts.cdnfonts.com/css/segoe-ui-4" rel="stylesheet">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #e9ecef;
      color: #333;
      line-height: 1.6;
    }
    #app {
      max-width: 600px;
      margin: 0 auto;
      padding: 1em;
      background: white;
      border-radius: 10px;
      box-shadow: 0px 0px 20px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #333;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
    }
    form input, form select, form button {
      padding: 10px;
      font-size: 1em;
      border-radius: 5px;
      border: 1px solid #ced4da;
    }
    form button, #app > button {
      cursor: pointer;
      background: #007bff;
      color: white;
      border: none;
      transition: background 0.2s;
    }
    form button:hover, #app > button:hover {
      background: #0056b3;
    }
    .adjective-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: #f8f9fa;
      border: 1px solid #ced4da;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px 0;
    }
    .adjective-item span {
      flex-grow: 1;
    }
    .adjective-item button {
      background: none;
      border: none;
      color: #007bff;
      cursor: pointer;
    }
    #adjectiveList {
      margin-top: 20px;
    }
  </style>
</head>
<body>
<div id="app">
  <h1>DescriptoCraft</h1>
  <form @submit.prevent="generateAdjectives">
    <input type="text" v-model="word" placeholder="Enter word" required>
    <select v-model="method">
      <option value="synonym">Synonym</option>
      <option value="theme">Theme/Setting</option>
      <option value="object">Object</option>
    </select>
    <input type="number" v-model="numAdjectives" min="1" placeholder="Number of adjectives" required>
    <button type="submit" :disabled="isLoading">{{ loading ? 'Generating...' : 'Generate' }}</button>
  </form>
  <button @click="clearAll">Clear All</button>
  <div id="adjectiveList">
    <div class="adjective-item" v-for="(adjective,index) in adjectives">
      <span @click="copyToClipboard(adjective)">{{adjective}}</span>
      <button @click="toggleFavorite(adjective)">Favorite</button>
    </div>
  </div>
  <div id="favoriteList" v-if="favorites.length > 0">
    <h2>Favorites</h2>
    <div class="adjective-item" v-for="(adjective, index) in favorites">
      <span @click="copyToClipboard(adjective)">{{ adjective }}</span>
      <button @click="removeFavorite(adjective)">Remove Favorite</button>
    </div>
  </div>
</div>
<script src="https://unpkg.com/vue@next"></script>
<script>
  const app = Vue.createApp({
    data() {
      return {
        word: '',
        method: 'synonym',
        numAdjectives: 5,
        adjectives: [],
        favorites: [],
        isLoading: false
      };
    },
    methods: {
      async generateAdjectives() {
        this.isLoading = true;
        const API_ENDPOINT = 'https://chatgpt.tobiasmue91.workers.dev/';
        const systemMessage = `You are the DescriptoCraft AI. You possess 3 different methods of generating adjectives:1. "synonym" - generate synonyms based on the given word;2. "theme" - generate fitting adjectives for a given theme,location,or setting;3. "object" - generate adjectives that describe the given object or thing`;
        let assistantMessage = `I will generate ${this.numAdjectives}adjectives for the word "${this.word}" using the "${this.method}" method. I will only output the generated adjectives in a comma-separated format.\n`;
        try {
          const response = await fetch(API_ENDPOINT, {
            method: 'POST',
            headers: { "Content-Type": "application/json", "Accept": "*/*" },
            body: JSON.stringify({
              model: "gpt-3.5-turbo",
              max_tokens: 500,
              messages: [
                { role: "system", content: systemMessage },
                { role: "assistant", content: assistantMessage }
              ],
            }),
          });
          this.isLoading = false;
          if (response.ok) {
            const data = await response.json();
            const responseMessageData = data.choices[0].message.content;
            this.adjectives = responseMessageData.split(",");
          } else {
            alert('Error occurred while generating adjectives. Please try again.');
          }
        } catch (e) {
          alert('Error occurred while generating adjectives. Please try again.');
        }
      },
      toggleFavorite(adjective) {
        if (this.favorites.includes(adjective)) {
          const index = this.favorites.indexOf(adjective);
          this.favorites.splice(index, 1);
        } else {
          this.favorites.push(adjective);
        }
        this.storeFavorites();
      },
      storeFavorites() {
        localStorage.setItem('favorites', JSON.stringify(this.favorites));
      },
      retrieveFavorites() {
        const favorites = localStorage.getItem('favorites');
        if (favorites) {
          this.favorites = JSON.parse(favorites);
        }
      },
      clearAll() {
        this.word = '';
        this.method = 'synonym';
        this.numAdjectives = 1;
        this.adjectives = [];
      },
      copyToClipboard(adjective) {
        navigator.clipboard.writeText(adjective);
        alert(`Adjective "${adjective}" copied to clipboard.`);
      },
      removeFavorite(adjective) {
        const index = this.favorites.indexOf(adjective);
        this.favorites.splice(index, 1);
        this.storeFavorites();
      },
    },
    mounted() {
      this.retrieveFavorites();
    },
  });

  app.mount('#app');
</script>
</body>
</html>