<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Editor</title>
    <style>
        /* CSS styles for SVG Editor */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background-color: #333;
            color: #fff;
        }

        .header h1 {
            margin: 0;
            font-size: 24px;
            font-weight: bold;
        }

        .toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background-color: #eee;
            border-bottom: 1px solid #ccc;
        }

        .toolbar button {
            margin-right: 10px;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            background-color: #fff;
            color: #333;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        .toolbar button:hover {
            background-color: #333;
            color: #fff;
        }

        .canvas {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #fff;
            overflow: auto;
        }

        .canvas svg {
            max-width: 100%;
            max-height: 100%;
        }

        .layers {
            display: flex;
            flex-direction: column;
            padding: 10px;
            background-color: #eee;
            border-top: 1px solid #ccc;
            overflow: auto;
        }

        .layers label {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            cursor: pointer;
        }

        .layers label input[type="checkbox"] {
            margin-right: 5px;
            cursor: pointer;
        }

        .layers label span {
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
        }

        .color-picker {
            display: flex;
            align-items: center;
            margin-right: 10px;
        }

        .color-picker label {
            display: flex;
            align-items: center;
            margin-right: 5px;
            font-size: 14px;
            font-weight: bold;
        }

        .color-picker input[type="color"] {
            margin-right: 5px;
            cursor: pointer;
        }

        .color-picker input[type="number"] {
            width: 50px;
            padding: 5px;
            border: none;
            border-radius: 5px;
            background-color: #eee;
            color: #333;
            text-align: center;
            cursor: pointer;
        }

        .color-picker input[type="number"]:focus {
            outline: none;
            background-color: #fff;
        }

        .stroke-options {
            display: flex;
            align-items: center;
            margin-right: 10px;
        }

        .stroke-options label {
            display: flex;
            align-items: center;
            margin-right: 5px;
            font-size: 14px;
            font-weight: bold;
        }

        .stroke-options input[type="number"] {
            width: 50px;
            padding: 5px;
            border: none;
            border-radius: 5px;
            background-color: #eee;
            color: #333;
            text-align: center;
            cursor: pointer;
        }

        .stroke-options input[type="number"]:focus {
            outline: none;
            background-color: #fff;
        }

        .undo-redo {
            display: flex;
            align-items: center;
            margin-right: 10px;
        }

        .undo-redo button {
            margin-right: 5px;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            background-color: #fff;
            color: #333;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        .undo-redo button:hover {
            background-color: #333;
            color: #fff;
        }

        .zoom-pan {
            display: flex;
            align-items: center;
            margin-right: 10px;
        }

        .zoom-pan button {
            margin-right: 5px;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            background-color: #fff;
            color: #333;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        .zoom-pan button:hover {
            background-color: #333;
            color: #fff;
        }

        .export {
            display: flex;
            align-items: center;
            margin-right: 10px;
        }

        .export button {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            background-color: #fff;
            color: #333;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        .export button:hover {
            background-color: #333;
            color: #fff;
        }
    </style>
</head>
<body>
<div class="container">
    <header class="header">
        <h1>SVG Editor</h1>
        <button id="save-btn">Save</button>
    </header>
    <div class="toolbar">
        <div class="color-picker">
            <label for="fill-color">Fill:</label>
            <input type="color" id="fill-color">
        </div>
        <div class="stroke-options">
            <label for="stroke-color">Stroke:</label>
            <input type="color" id="stroke-color">
            <label for="stroke-width">Width:</label>
            <input type="number" id="stroke-width" min="1" max="10" value="1">
        </div>
        <div class="undo-redo">
            <button id="undo-btn">Undo</button>
            <button id="redo-btn">Redo</button>
        </div>
        <div class="zoom-pan">
            <button id="zoom-in-btn">+</button>
            <button id="zoom-out-btn">-</button>
            <button id="pan-btn">Pan</button>
        </div>
        <div class="export">
            <button id="png-btn">PNG</button>
            <button id="jpg-btn">JPG</button>
            <button id="pdf-btn">PDF</button>
        </div>
    </div>
    <div class="canvas">
        <svg id="svg-canvas"></svg>
    </div>
    <div class="layers">
        <label>
            <input type="checkbox" id="layer-1" checked>
            <span>Layer 1</span>
        </label>
        <label>
            <input type="checkbox" id="layer-2" checked>
            <span>Layer 2</span>
        </label>
        <label>
            <input type="checkbox" id="layer-3" checked>
            <span>Layer 3</span>
        </label>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg-min.js"></script>
<script>
    // JavaScript code for SVG Editor
    $(document).ready(function () {
        // Initialize SVG canvas
        var canvas = Snap("#svg-canvas");
        canvas.attr({viewBox: "0 0 800 600"});
        canvas.rect(0, 0, "100%", "100%").attr({fill: "#fff"});
        // Initialize drawing tools
        var currentTool = "select";
        var drawingTools = {
            select: null,
            line: null,
            rectangle: null,
            circle: null,
            polygon: null,
            bezier: null,
            text: null
        };
        // Initialize object selection
        var selectedObject = null;
        // Initialize layers
        var layers = {
            "layer-1": canvas.group(),
            "layer-2": canvas.group(),
            "layer-3": canvas.group()
        };
        // Initialize undo/redo stack
        var undoStack = [];
        var redoStack = [];
        // Initialize zoom/pan variables
        var zoomLevel = 1;
        var panX = 0;
        var panY = 0;
        // Initialize color/stroke options
        var fillColor = "#000";
        var strokeColor = "#000";
        var strokeWidth = 1;
        // Initialize export options
        var exportOptions = {
            png: false,
            jpg: false,
            pdf: false
        };
        // Initialize event listeners
        canvas.node.addEventListener("mousedown", onMouseDown);
        canvas.node.addEventListener("mousemove", onMouseMove);
        canvas.node.addEventListener("mouseup", onMouseUp);
        canvas.node.addEventListener("mouseleave", onMouseLeave);
        $("#save-btn").on("click", onSave);
        $("#fill-color").on("change", onFillColorChange);
        $("#stroke-color").on("change", onStrokeColorChange);
        $("#stroke-width").on("change", onStrokeWidthChange);
        $("#undo-btn").on("click", onUndo);
        $("#redo-btn").on("click", onRedo);
        $("#zoom-in-btn").on("click", onZoomIn);
        $("#zoom-out-btn").on("click", onZoomOut);
        $("#pan-btn").on("click", onPan);
        $("#png-btn").on("click", onExportPNG);
        $("#jpg-btn").on("click", onExportJPG);
        $("#pdf-btn").on("click", onExportPDF);
        $("#layer-1").on("change", onLayerChange);
        $("#layer-2").on("change", onLayerChange);
        $("#layer-3").on("change", onLayerChange);

        // Initialize functions
        function onMouseDown(event) {
            switch (currentTool) {
                case "select":
                    onSelectMouseDown(event);
                    break;
                case "line":
                    onLineMouseDown(event);
                    break;
                case "rectangle":
                    onRectangleMouseDown(event);
                    break;
                case "circle":
                    onCircleMouseDown(event);
                    break;
                case "polygon":
                    onPolygonMouseDown(event);
                    break;
                case "bezier":
                    onBezierMouseDown(event);
                    break;
                case "text":
                    onTextMouseDown(event);
                    break;
            }
        }

        function onMouseMove(event) {
            switch (currentTool) {
                case "select":
                    onSelectMouseMove(event);
                    break;
                case "line":
                    onLineMouseMove(event);
                    break;
                case "rectangle":
                    onRectangleMouseMove(event);
                    break;
                case "circle":
                    onCircleMouseMove(event);
                    break;
                case "polygon":
                    onPolygonMouseMove(event);
                    break;
                case "bezier":
                    onBezierMouseMove(event);
                    break;
                case "text":
                    onTextMouseMove(event);
                    break;
            }
        }

        function onMouseUp(event) {
            switch (currentTool) {
                case "select":
                    onSelectMouseUp(event);
                    break;
                case "line":
                    onLineMouseUp(event);
                    break;
                case "rectangle":
                    onRectangleMouseUp(event);
                    break;
                case "circle":
                    onCircleMouseUp(event);
                    break;
                case "polygon":
                    onPolygonMouseUp(event);
                    break;
                case "bezier":
                    onBezierMouseUp(event);
                    break;
                case "text":
                    onTextMouseUp(event);
                    break;
            }
        }

        function onMouseLeave(event) {
            switch (currentTool) {
                case "select":
                    onSelectMouseLeave(event);
                    break;
                case "line":
                    onLineMouseLeave(event);
                    break;
                case "rectangle":
                    onRectangleMouseLeave(event);
                    break;
                case "circle":
                    onCircleMouseLeave(event);
                    break;
                case "polygon":
                    onPolygonMouseLeave(event);
                    break;
                case "bezier":
                    onBezierMouseLeave(event);
                    break;
                case "text":
                    onTextMouseLeave(event);
                    break;
            }
        }

        function onSave() {
            // TODO: Implement save functionality
        }

        function onFillColorChange(event) {
            fillColor = event.target.value;
            if (selectedObject) {
                selectedObject.attr({fill: fillColor});
            }
        }

        function onStrokeColorChange(event) {
            strokeColor = event.target.value;
            if (selectedObject) {
                selectedObject.attr({stroke: strokeColor});
            }
        }

        function onStrokeWidthChange(event) {
            strokeWidth = parseInt(event.target.value);
            if (selectedObject) {
                selectedObject.attr({"stroke-width": strokeWidth});
            }
        }

        function onUndo() {
            if (undoStack.length > 0) {
                var lastAction = undoStack.pop();
                redoStack.push(lastAction);
                switch (lastAction.type) {
                    case "create":
                        lastAction.object.remove();
                        break;
                    case "delete":
                        lastAction.layer.add(lastAction.object);
                        break;
                    case "move":
                        lastAction.object.transform("t" + -lastAction.dx + "," + -lastAction.dy);
                        break;
                    case "modify":
                        lastAction.object.attr(lastAction.oldAttrs);
                        break;
                }
                updateLayers();
            }
        }

        function onRedo() {
            if (redoStack.length > 0) {
                var lastAction = redoStack.pop();
                undoStack.push(lastAction);
                switch (lastAction.type) {
                    case "create":
                        lastAction.layer.add(lastAction.object);
                        break;
                    case "delete":
                        lastAction.object.remove();
                        break;
                    case "move":
                        lastAction.object.transform("t" + lastAction.dx + "," + lastAction.dy);
                        break;
                    case "modify":
                        lastAction.object.attr(lastAction.newAttrs);
                        break;
                }
                updateLayers();
            }
        }

        function onZoomIn() {
            zoomLevel += 0.1;
            canvas.attr({transform: "scale(" + zoomLevel + ")" + " translate(" + panX + "," + panY + ")"});
        }

        function onZoomOut() {
            zoomLevel -= 0.1;
            if (zoomLevel < 0.1) {
                zoomLevel = 0.1;
            }
            canvas.attr({transform: "scale(" + zoomLevel + ")" + " translate(" + panX + "," + panY + ")"});
        }

        function onPan() {
            currentTool = "pan";
        }

        function onExportPNG() {
            // TODO: Implement PNG export functionality
        }

        function onExportJPG() {
            // TODO: Implement JPG export functionality
        }

        function onExportPDF() {
            // TODO: Implement PDF export functionality
        }

        function onLayerChange(event) {
            var layerID = event.target.id;
            var layer = layers[layerID];
            if (event.target.checked) {
                layer.attr({display: "block"});
            } else {
                layer.attr({display: "none"});
            }
        }

        function onSelectMouseDown(event) {
        }

        function onSelectMouseMove(event) {
        }

        function onSelectMouseUp(event) {
        }

        function onSelectMouseLeave(event) {
        }

        function onLineMouseDown(event) {
        }

        function onLineMouseMove(event) {
        }

        function onLineMouseUp(event) {
        }

        function onLineMouseLeave(event) {
        }

        function onRectangleMouseDown(event) {
        }

        function onRectangleMouseMove(event) {
        }

        function onRectangleMouseUp(event) {
        }

        function onRectangleMouseLeave(event) {
        }

        function onCircleMouseDown(event) {
        }

        function onCircleMouseMove(event) {
        }

        function onCircleMouseUp(event) {
        }

        function onCircleMouseLeave(event) {
        }

        function onPolygonMouseDown(event) {
        }

        function onPolygonMouseMove(event) {
        }

        function onPolygonMouseUp(event) {
        }

        function onPolygonMouseLeave(event) {
        }

        function onBezierMouseDown(event) {
        }

        function onBezierMouseMove(event) {
        }

        function onBezierMouseUp(event) {
        }

        function onBezierMouseLeave(event) {
        }

        function onTextMouseDown(event) {
        }

        function onTextMouseMove(event) {
        }

        function onTextMouseUp(event) {
        }

        function onTextMouseLeave(event) {
        }

        function updateLayers() {
            // Update layer visibility according to checkbox states
            for (var layerID in layers) {
                var layer = layers[layerID];
                var checkbox = $("#" + layerID);
                if (checkbox.prop("checked")) {
                    layer.attr({display: "block"});
                } else {
                    layer.attr({display: "none"});
                }
            }
        }
    });
</script>
</body>
</html>