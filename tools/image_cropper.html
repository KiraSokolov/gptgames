<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #image-cropper {
            position: relative;
            width: 300px;
            height: 300px;
            overflow: hidden;
            margin: 0 auto;
        }

        #image-preview {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
        }

        #crop-button {
            display: block;
            margin: 0 auto;
            margin-top: 10px;
        }
    </style>
</head>
<body>
<div id="image-cropper">
    <div id="image-preview"></div>
</div>
<input type="file" id="image-input" accept="image/*">
<button id="crop-button">Crop Image</button>
<script type="text/javascript">
    // Define variables
    var imageCropper = document.getElementById('image-cropper');
    var imagePreview = document.getElementById('image-preview');
    var imageInput = document.getElementById('image-input');
    var cropButton = document.getElementById('crop-button');

    var canvas = document.createElement('canvas');
    var ctx = canvas.getContext('2d');
    var image = new Image();

    // Set the output dimensions of the cropped image
    var outputSize = 300;

    // Listen for when a new image is selected
    imageInput.addEventListener('change', function(e) {
        if (e.target.files && e.target.files[0]) {
            var reader = new FileReader();

            reader.onload = function(e) {
                image.src = e.target.result;
                image.onload = function() {
                    imagePreview.style.backgroundImage = 'url(' + image.src + ')';
                }
            }

            reader.readAsDataURL(e.target.files[0]);
        }
    });

    // Listen for when the crop button is clicked
    cropButton.addEventListener('click', function() {
        var width = image.width;
        var height = image.height;
        var minSize = Math.min(width, height);
        var offsetX = (width - minSize) / 2;
        var offsetY = (height - minSize) / 2;

        // Set the canvas size to the output dimensions
        canvas.width = outputSize;
        canvas.height = outputSize;

        // Draw the cropped image onto the canvas
        ctx.drawImage(image, offsetX, offsetY, minSize, minSize, 0, 0, outputSize, outputSize);

        // Get the data URL of the cropped image
        var croppedImage = canvas.toDataURL('image/jpeg');

        // Do something with the cropped image (e.g. display it on the page)
        var img = document.createElement('img');
        img.src = croppedImage;
        document.body.appendChild(img);
    });

</script>
</body>
</html>