<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Media Query Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js"></script>
    <style>
        /* General styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        /* Input Area */
        .input-area {
            background-color: #f5f5f5;
            padding: 20px;
        }

        .breakpoint {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .breakpoint input {
            margin-right: 5px;
        }

        /* Preview Area */
        .preview-area {
            background-color: #ffffff;
            padding: 20px;
            margin-bottom: 20px;
        }

        .sample-layout {
            border: 1px solid #ccc;
            padding: 10px;
            width: 100%;
            box-sizing: border-box;
        }

        /* Output Area */
        .output-area {
            background-color: #f5f5f5;
            padding: 20px;
        }

        .generated-code {
            background-color: #ffffff;
            border: 1px solid #ccc;
            padding: 10px;
            width: 100%;
            height: 200px;
            box-sizing: border-box;
        }
    </style>
    <script src="https://unpkg.com/vue@2.6.14/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
</head>
<body>
<div id="app">
    <div class="input-area">
        <h2>Input Area</h2>
        <div v-for="(breakpoint, index) in breakpoints" class="breakpoint">
            <input type="number" v-model.number="breakpoint.value" @input="updateMediaQueries"
                   placeholder="Breakpoint value">
            <input type="text" :id="'rule-' + index" v-model="breakpoint.rule" @input="updateMediaQueries"
                   placeholder="CSS rule"/>
            <input type="text" :id="'ruleValue-' + index" v-model="breakpoint.ruleValue" @input="updateMediaQueries"
                   placeholder="Rule value"/>
            <input type="text" v-model="breakpoint.selectors" placeholder="Selectors (comma-separated)"/>
            <button @click="removeBreakpoint(index)">Remove</button>
        </div>
        <select v-model="selectedPreset">
            <option value="" disabled>Select Preset Breakpoint</option>
            <option value="480">Small</option>
            <option value="768">Medium</option>
            <option value="1024">Large</option>
        </select>
        <button @click="addBreakpoint">Add Breakpoint</button>
    </div>
    <div class="preview-area">
        <h2>Preview Area</h2>
        <div class="sample-layout" :style="previewStyles">
            Sample Layout
        </div>
    </div>

    <div class="output-area">
        <h2>Output Area</h2>
        <textarea class="generated-code" v-model="generatedCode" readonly></textarea>
        <button @click="copyToClipboard">Copy to Clipboard</button>
    </div>
</div>

<script>
    new Vue({
        el: '#app',
        data: {
            breakpoints: [],
            generatedCode: '',
            previewStyles: {},
            selectedPreset: '',
            cssProperties: [
                'display', 'width', 'height', 'background-color', 'color', 'font-size',
                'margin', 'padding', 'border', 'position', 'top', 'right', 'bottom', 'left',
                'font-family', 'font-weight', 'line-height', 'letter-spacing',
                'text-align', 'text-decoration', 'text-transform', 'white-space',
                'background-image', 'background-repeat', 'background-position', 'background-size',
                'opacity', 'border-radius', 'box-shadow', 'transition', 'transform', 'z-index'
            ]
        },
        methods: {
            addBreakpoint() {
                let breakpoint = {
                    value: this.selectedPreset ? parseInt(this.selectedPreset) : null,
                    rule: '',
                    ruleValue: '',
                    selectors: ''
                };
                this.breakpoints.push(breakpoint);
                this.selectedPreset = '';
                this.$nextTick(() => {
                    const awesompleteInstance = new Awesomplete(document.getElementById(`rule-${this.breakpoints.length - 1}`), {
                        list: this.cssProperties,
                        minChars: 1,
                        autoFirst: true
                    });
                    awesompleteInstance.input.addEventListener('awesomplete-selectcomplete', (event) => {
                        breakpoint.rule = event.text.value;
                        this.updateMediaQueries();
                    });
                });
            },
            removeBreakpoint(index) {
                this.breakpoints.splice(index, 1);
                this.updateMediaQueries();
            },
            updateMediaQueries() {
                let mediaQueries = '';
                let previewStyles = {};
                let selectorsStyles = {};

                for (let breakpoint of this.breakpoints) {
                    if (breakpoint.value && breakpoint.rule && breakpoint.ruleValue && breakpoint.selectors) {
                        const selectors = breakpoint.selectors.split(',').map(s => s.trim()).join(', ');
                        const query = `@media (min-width: ${breakpoint.value}px) { ${selectors} { ${breakpoint.rule}: ${breakpoint.ruleValue}; } }`;
                        mediaQueries += query + '\n';

                        if (!selectorsStyles[breakpoint.selectors]) {
                            selectorsStyles[breakpoint.selectors] = {};
                        }
                        selectorsStyles[breakpoint.selectors][breakpoint.rule] = breakpoint.ruleValue;
                    }
                }

                for (let selectors in selectorsStyles) {
                    previewStyles[selectors] = selectorsStyles[selectors];
                }

                this.generatedCode = mediaQueries;
                this.previewStyles = previewStyles;
            },
            copyToClipboard() {
                const clipboard = new ClipboardJS('.generated-code', {
                    text: () => this.generatedCode
                });

                clipboard.on('success', () => {
                    alert('Generated media query code copied to clipboard!');
                    clipboard.destroy();
                });

                clipboard.on('error', () => {
                    alert('Error copying generated media query code.');
                    clipboard.destroy();
                });
            }
        }
    });
</script>
</body>
</html>